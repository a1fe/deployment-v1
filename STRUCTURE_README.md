# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–∞ HR Analysis

## –û–±–∑–æ—Ä –Ω–æ–≤–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ deployment/ —Ç–µ–ø–µ—Ä—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞–ø–∫–∏:

### üìÅ deployment/common/
**–û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤**

–°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω—ã –Ω–∞ –æ–±–æ–∏—Ö —Ç–∏–ø–∞—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ (CPU –∏ GPU):

- `architecture_config.py` - –æ–±—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- `main.py` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
- `start_celery.sh` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ Celery
- `requirements.txt` - –æ–±—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `.env.example` - —à–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `install.sh` - —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- `check_dependencies.sh` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### –ü–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
- `celery_app/` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Celery
- `database/` - –º–æ–¥–µ–ª–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
- `models/` - –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- `tasks/` - –∑–∞–¥–∞—á–∏ Celery
- `utils/` - —É—Ç–∏–ª–∏—Ç—ã (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, —Å–µ–∫—Ä–µ—Ç—ã)
- `scripts/` - —Å–∫—Ä–∏–ø—Ç—ã (health check, backup)

### üìÅ deployment/cpu-server/
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç–æ–ª—å–∫–æ –¥–ª—è CPU —Å–µ—Ä–≤–µ—Ä–∞**

–°–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∞–π–ª—ã, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è CPU —Å–µ—Ä–≤–µ—Ä–∞:

- `cpu_server_config.py` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CPU —Å–µ—Ä–≤–µ—Ä–∞
- `start_cpu_celery.sh` - –∑–∞–ø—É—Å–∫ CPU –≤–æ—Ä–∫–µ—Ä–æ–≤
- `start_cpu_server.sh` - –∑–∞–ø—É—Å–∫ CPU —Å–µ—Ä–≤–µ—Ä–∞

### üìÅ deployment/gpu-server/
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç–æ–ª—å–∫–æ –¥–ª—è GPU —Å–µ—Ä–≤–µ—Ä–∞**

–°–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∞–π–ª—ã, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è GPU —Å–µ—Ä–≤–µ—Ä–∞:

- `gpu_server_config.py` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è GPU —Å–µ—Ä–≤–µ—Ä–∞
- `start_gpu_celery.sh` - –∑–∞–ø—É—Å–∫ GPU –≤–æ—Ä–∫–µ—Ä–æ–≤
- `startup_gpu_server.sh` - –∑–∞–ø—É—Å–∫ GPU —Å–µ—Ä–≤–µ—Ä–∞

## –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞

### üñ•Ô∏è –ó–∞–ø—É—Å–∫ CPU —Å–µ—Ä–≤–µ—Ä–∞
```bash
./start_cpu_deployment.sh
```

### üöÄ –ó–∞–ø—É—Å–∫ GPU —Å–µ—Ä–≤–µ—Ä–∞
```bash
./start_gpu_deployment.sh
```

## –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è

### –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (common/)
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞
- –ë–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ Celery
- –£—Ç–∏–ª–∏—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã
- –°–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### CPU-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è CPU –≤–æ—Ä–∫–µ—Ä–æ–≤
- –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ CPU —Å–µ—Ä–≤–∏—Å–æ–≤
- Fallback –ª–æ–≥–∏–∫–∞ –¥–ª—è GPU –∑–∞–¥–∞—á

### GPU-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è GPU –≤–æ—Ä–∫–µ—Ä–æ–≤
- CUDA —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è GPU –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –û–±—â–∏–µ
```bash
# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–µ—Ä–≤–µ—Ä–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
SERVER_TYPE=cpu  # –∏–ª–∏ gpu
IS_GPU_SERVER=false  # –∏–ª–∏ true

# –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DATABASE_URL=postgresql://...
REDIS_URL=redis://...
ENVIRONMENT=production
```

### –¢–æ–ª—å–∫–æ –¥–ª—è GPU —Å–µ—Ä–≤–µ—Ä–∞
```bash
GPU_INSTANCE_NAME=gpu-server-instance
CUDA_VISIBLE_DEVICES=0
```

## Workflow –∑–∞–ø—É—Å–∫–∞

### CPU —Å–µ—Ä–≤–µ—Ä
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PYTHONPATH
3. –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ CPU-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
5. –ó–∞–ø—É—Å–∫ CPU –≤–æ—Ä–∫–µ—Ä–æ–≤ –∏ Beat

### GPU —Å–µ—Ä–≤–µ—Ä
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ CUDA
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PYTHONPATH –∏ CUDA_VISIBLE_DEVICES
3. –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ GPU-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
5. –ó–∞–ø—É—Å–∫ GPU –≤–æ—Ä–∫–µ—Ä–æ–≤

## –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á

### CPU —Å–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
- `search_basic` - –±–∞–∑–æ–≤—ã–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
- `fillout` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Fillout API
- `default` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- `notifications` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `embeddings_cpu` - fallback —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (–µ—Å–ª–∏ GPU –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
- `scoring_cpu` - fallback —Å–∫–æ—Ä–∏–Ω–≥ (–µ—Å–ª–∏ GPU –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)

### GPU —Å–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
- `embeddings_gpu` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- `scoring_gpu` - —Å–∫–æ—Ä–∏–Ω–≥ –∏ —Ä–µ—Ä–∞–Ω–∫–∏–Ω–≥
- `ai_analysis` - LLM –∞–Ω–∞–ª–∏–∑

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- Health check: `common/scripts/health_check.py`
- Worker monitor: `common/utils/worker_monitor.py`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: `common/utils/logging_config.py`
- Backup: `common/scripts/create_backup.sh`

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å —Å—Ç–∞—Ä–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

1. –í—Å–µ —Ñ–∞–π–ª—ã –∏–∑ –∫–æ—Ä–Ω—è deployment/ –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ common/
2. –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –∏ –ø—É—Ç–∏
3. –°–æ–∑–¥–∞–Ω—ã —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Å–µ—Ä–≤–µ—Ä–∞
4. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–∏–ø–∞ —Å–µ—Ä–≤–µ—Ä–∞
